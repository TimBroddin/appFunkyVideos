<div layout="row" layout-wrap>
    <div flex="100" class="upload-container page-container" ng-hide="vm.movieUploaded">
        <p>To start editing, please enter the e-mail address to send the result to, and upload your video.</p>
        <md-input-container layout="row">
            <div flex="25">
            <label>E-mail address</label>
            <input ng-model="vm.emailRecipient" ng-init="vm.emailRecipient= 'kusksu@gmail.com'" type="email" required />
            </div>
            <div flex="5"></div>
            <div  flex ng-show="vm.emailRecipient">
                <input ng-model="vm.subtitle.video" ngf-accept="'video/mp4'" ngf-select="vm.upload($file)" type="file" />
                <p ng-if="vm.progressPercentage && !vm.movieUploaded">{{vm.progressPercentage}} %</p>
            </div>
        </md-input-container>
    </div>
    <div flex="70" class="video-container page-container" ng-if="vm.movieUploaded">
        <div class="videowrapper">
            <vrt-videoplayer source="vm.file.tempUrl" start="vm.form.start" end="vm.form.end" update-time="vm.updateTime()"></vrt-videoplayer>
            <p id="subtitlePreview" class="subtitles-text-line-preserve">{{vm.currentSubtitlePreview}}</p>
        </div>

        <rzslider rz-slider-model="vm.form.start" rz-slider-high="vm.form.end" rz-slider-options="vm.slider.options"></rzslider>
        <div class="subtitle-editor-wrap">
            <section layout="row" layout-sm="column" layout-align="center center" layout-wrap>
                <md-input-container flex="20">
                    <label>Start</label>
                    <input id="subtitleStart" ng-model="vm.form.start" type="number" step="0.001">
                </md-input-container>
                <md-input-container flex="20">
                    <label>End</label>
                    <input id="subtitleEnd" ng-model="vm.form.end" type="number" step="0.001">
                </md-input-container >
                <md-input-container flex="36">
                    <label>Subtitle text</label>
                    <textarea vrt-maxlines="2" maxlines-prevent-enter="true" id="subtitleText" name="title" ng-model="vm.form.text"></textarea>
                </md-input-container>
                <md-button class="md-raised" aria-label="Add line" ng-click="vm.addSubtitle()">
                    Start new line
                </md-button>
            </section>
        </div>
    </div>

    <div flex="30" class="subtitles-container page-container"  ng-if="vm.movieUploaded">
        <!--<md-toolbar class="vrt-sub-toolbar">-->
            <!--<div class="md-toolbar-tools">-->
                <!--<h3>-->
                    <!--Edit subtitle-->
                <!--</h3>-->
            <!--</div>-->
        <!--</md-toolbar>-->

        <!--<div class="subtitle-edit-wrap">-->
            <!--<textarea id="subtitleText" name="title" ng-model="vm.form.text" placeholder="subtitle text"></textarea>-->

            <!--<div class="fine-tune-start">-->
                <!--<label for="subtitleStart"></label>-->
                <!--<input id="subtitleStart" ng-model="vm.form.start" type="number" step="0.001">-->
            <!--</div>-->
            <!--<div class="fine-tune-end">-->
                <!--<label for="subtitleEnd"></label>-->
                <!--<input id="subtitleEnd" ng-model="vm.form.end" type="number" step="0.001">-->
            <!--</div>-->
        <!--</div>-->

        <div class="subtitles-wrap">
            <md-toolbar class="vrt-sub-toolbar">
                <div class="md-toolbar-tools">
                    <h3>
                        Subtitles
                    </h3>
                    <span flex></span>
                </div>
            </md-toolbar>

            <div class="subtitles-list-wrap">
                <!--<md-button class="md-raised" aria-label="Add line" ng-click="vm.addSubtitle()">-->
                    <!--Add line-->
                <!--</md-button>-->

                <md-content  style="height: 650px;">
                    <md-list>
                        <md-list-item class="md-2-line" ng-repeat="line in vm.subtitles | orderBy: 'start'" ng-click="vm.editSubtitle(line)">
                            <div class="md-list-item-text">
                                <h3>{{line.start}} - {{line.end}}</h3>
                                <p>{{line.text}}</p>
                            </div>
                            <i ng-click="vm.editSubtitle(line)" class="material-icons">&#xE254;</i>
                            <i ng-click="vm.deleteSubtitle(line)" class="material-icons">&#xE92B;</i>
                            <md-divider ng-if="!$last"></md-divider>
                        </md-list-item>
                    </md-list>
                </md-content>
                <md-subheader class="md-no-sticky">
                    <md-button class="md-raised" aria-label="Preview and save subtitles" ng-click="vm.previewSubtitles()">
                        Preview
                    </md-button>
                    <md-button class="md-raised" aria-label="Preview and save subtitles" ng-click="vm.renderSubtitles()">
                        Submit
                    </md-button>
                </md-subheader>
            </div>
        </div>
    </div>
</div>

<!--<form name="mailForm">-->
    <!--<md-input-container>-->
        <!--<label>Email - naar dit adres wordt de verwerkte video verstuurd</label>-->
        <!--<input required name="email" ng-model="vm.subtitle.email" type="email" ng-pattern="/^.+@.+\..+$/"/>-->
        <!--<div ng-messages="mailForm.email.$error" ng-if="mailForm.$submitted || mailForm.email.$touched">-->
            <!--<div ng-message="required">This is required.</div>-->
            <!--<div ng-message='pattern'>-->
                <!--Your email must look like an e-mail address.-->
            <!--</div>-->
        <!--</div>-->
    <!--</md-input-container>-->
<!--</form>-->

<!--<p ng-if="vm.isReadyForProcess">-->
    <!--Uw video wordt verwerkt. Zodra deze klaar is ontvangt u een e-mail met download link.-->
    <!--Vergeet niet uw spam-folder na te kijken.-->
<!--</p>-->

<!--<md-button ng-click="vm.downloadSRTFile(vm.srtObj)" class="md-raised" ng-disabled="!vm.subtitle.email">Generate</md-button>-->
<!--<a ng-if='f.subtitled' target="_self" ng-href='/{{f.url}}' download="filename">download</a>-->
